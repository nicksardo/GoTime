<html>
<head>
<title>GoTime Example</title>
</head>
<body>
Local:<br />
<h1 id="local"></h1>
Server:<br />
<h1 id="server"></h1>
Server 2:<br />
<h1 id="server2"></h1>
Sync Count: Method:<br />
<h1 id="method"></h1>
Offset:<br />
<h1 id="offset"></h1>
Precision:<br />
<h1 id="precision"></h1>
<script src="GoTime.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

<script>
    $(function() {

        // Set options before first GoTime use
        GoTime.setOptions({
            AjaxURL: "/time",
            WhenSynced: function(){
                // Is called for the first sync
                $('#server2').text((new GoTime()).toUTCString());

                $('#offset').text(GoTime.getOffset());
                $('#precision').text(GoTime.getPrecision());
                $('#method').text(GoTime.getSyncCount() + " : " + GoTime.getLastMethod());
            },
            OnSync: function(){
                // Calls on ever sync starting with the second sync
                $('#offset').text(GoTime.getOffset());
                $('#precision').text(GoTime.getPrecision());
                $('#method').text(GoTime.getSyncCount() + " : " + GoTime.getLastMethod());
            },
            SyncInterval: 3000 // Set this often for demo purposes only
        });

        $('#local').text((new Date()).toUTCString());
        $('#server').text((new GoTime()).toUTCString());


        var socket = new WebSocket("ws://" + window.location.host + "/ws");
        socket.onmessage = function(msg){
            GoTime.wsReceived(msg.data)
        }

        GoTime.wsSend(function(){
            if (socket !== null && socket.readyState === 1) {
                socket.send("time")
                return true
            }
            return false
        });


    });
</script>

</body>
</html>