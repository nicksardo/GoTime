(function(){window.GoTime=function(){function a(){a._setupSync();return new Date(a.now())}a._syncCount=0;a._offset=0;a._precision=null;a._syncSecondTimeout=2E3;a._syncInterval=9E5;a._synchronizing=!1;a._lastSyncTime=null;a._lastSyncMethod=null;a._ajaxURL=null;a._ajaxSampleSize=1;a._firstSyncCallbackRan=!1;a._firstSyncCallback=null;a._onSyncCallback=null;a._wsCall=null;a._wsRequestTime=null;a._setupSync=function(){!1===a._synchronizing&&(a._synchronizing=!0,a._sync(),setTimeout(a._sync,a._syncSecondTimeout),
setInterval(a._sync,a._syncInterval))};a.now=function(){return Date.now()+a._offset};a.getOffset=function(){return a._offset};a.getPrecision=function(){return a._precision};a.getLastMethod=function(){return a._lastSyncMethod};a.getSyncCount=function(){return a._syncCount};a.setOptions=function(b){null!=b.AjaxURL&&(a._ajaxURL=b.AjaxURL);null!=b.SyncSecondTimeout&&(a._syncSecondTimeout=b.SyncSecondTimeout);null!=b.SyncInterval&&(a._syncInterval=b.SyncInterval);null!=b.OnSync&&(a._onSyncCallback=b.OnSync);
null!=b.WhenSynced&&(a._firstSyncCallback=b.WhenSynced);return a._setupSync()};a.wsSend=function(b){return a._wsCall=b};a.wsReceived=function(b){var c;c=Date.now();b=a._dateFromService(b);c=a._calculateOffset(a._wsRequestTime,c,b);return a._reviseOffset(c,"websocket")};a._ajaxSample=function(b,c){var d,e;d=new XMLHttpRequest;d.open("GET",a._ajaxURL);d.onreadystatechange=function(){var b,c;b=Date.now();4===d.readyState&&200===d.status&&(c=a._dateFromService(d.responseText),b=a._calculateOffset(e,b,
c),a._reviseOffset(b,"ajax"))};e=Date.now();d.send();return!0};a._sync=function(){var b;if(null!=a._wsCall&&(a._wsRequestTime=Date.now(),b=a._wsCall())){a._syncCount++;return}null!=a._ajaxURL&&(b=a._ajaxSample(1))&&a._syncCount++};a._calculateOffset=function(a,c,d){c=(c-a)/2;return{offset:d-a+c,precision:c}};a._reviseOffset=function(b,c){if(!isNaN(b.offset)&&!isNaN(b.precision)){a._offset=b.offset;a._precision=b.precision;a._lastSyncTime=a.now();a._lastSyncMethod=c;if(!a._firstSyncCallbackRan&&null!=
a._firstSyncCallback)return a._firstSyncCallbackRan=!0,a._firstSyncCallback();if(null!=a._onSyncCallback)return a._onSyncCallback()}};a._dateFromService=function(a){return new Date(parseInt(a))};return a}()}).call(this);
